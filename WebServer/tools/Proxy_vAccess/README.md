# üîí vAccess –¥–ª—è Proxy-—Å–µ—Ä–≤–∏—Å–∞

–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è vAccess –¥–ª—è –≤–µ–±-—Å–∞–π—Ç–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Proxy_vAccess/
‚îú‚îÄ‚îÄ _example_vAccess.conf     - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
‚îú‚îÄ‚îÄ {domain}_vAccess.conf      - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
‚îî‚îÄ‚îÄ README.md                  - –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–∫—Å–∏-–¥–æ–º–µ–Ω–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª:
```
{ExternalDomain}_vAccess.conf
```

**–ü—Ä–∏–º–µ—Ä:**
- `git.example.ru_vAccess.conf`
- `api.myservice.com_vAccess.conf`
- `proxy.domain.org_vAccess.conf`

### 2. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ö–∞–∂–¥—ã–π –±–ª–æ–∫ –ø—Ä–∞–≤–∏–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è `#`:

```conf
# –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞
type: Allow | Disable
path_access: /path1/*, /path2/*
ip_list: 192.168.1.1, 127.0.0.1
exceptions_dir: /public/*
url_error: 404 | https://site.com | /error.html
```

## üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∞–≤–∏–ª

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `type` | ‚úÖ –î–∞ | `Allow` - —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø, `Disable` - –∑–∞–ø—Ä–µ—Ç–∏—Ç—å |
| `type_file` | ‚ùå –ù–µ—Ç | –†–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (*.json, *.pdf) |
| `path_access` | ‚ùå –ù–µ—Ç | –°–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `ip_list` | ‚ùå –ù–µ—Ç | –°–ø–∏—Å–æ–∫ IP –∞–¥—Ä–µ—Å–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `exceptions_dir` | ‚ùå –ù–µ—Ç | –ü—É—Ç–∏-–∏—Å–∫–ª—é—á–µ–Ω–∏—è (–ø—Ä–∞–≤–∏–ª–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è) |
| `url_error` | ‚ùå –ù–µ—Ç | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ |

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ê–¥–º–∏–Ω–∫–∞ —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö IP
```conf
# –†–∞–∑—Ä–µ—à–∞–µ–º –∞–¥–º–∏–Ω–∫—É —Ç–æ–ª—å–∫–æ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö IP
type: Allow
path_access: /admin/*, /api/admin/*
ip_list: 127.0.0.1, 192.168.1.100
url_error: 404
```

### –ü—Ä–∏–º–µ—Ä 2: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö IP
```conf
# –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ IP –¥–ª—è –≤—Å–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
type: Disable
ip_list: 10.0.0.50, 192.168.1.200
url_error: https://example.com/blocked
```

### –ü—Ä–∏–º–µ—Ä 3: –ó–∞—â–∏—Ç–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API
```conf
# –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –∫ —Å–ª—É–∂–µ–±–Ω—ã–º API
type: Disable
path_access: /internal/*, /private/*
exceptions_dir: /internal/health
url_error: 404
```

### –ü—Ä–∏–º–µ—Ä 4: –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
```conf
# –†–∞–∑—Ä–µ—à–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ API —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤
type: Allow
path_access: /api/*
ip_list: 127.0.0.1, ::1, 192.168.0.0/16
url_error: 404
```

### –ü—Ä–∏–º–µ—Ä 5: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```conf
# –ë–ª–æ–∫–∏—Ä—É–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
type: Disable
type_file: *.php, *.exe, *.sh, *.bat
path_access: /uploads/*, /files/*
url_error: 404
```

### –ü—Ä–∏–º–µ—Ä 6: –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã
```conf
# –í API —Ä–∞–∑—Ä–µ—à–∞–µ–º —Ç–æ–ª—å–∫–æ JSON –∏ XML
type: Allow
type_file: *.json, *.xml, no_extension
path_access: /api/*
url_error: 404
```

### –ü—Ä–∏–º–µ—Ä 7: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤
```conf
# –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø—É—Ç–µ–π
type: Disable
type_file: *.zip, *.rar, *.7z, *.tar.gz
path_access: /downloads/private/*
exceptions_dir: /downloads/private/public/*
url_error: https://example.com/access-denied
```

## ‚öôÔ∏è –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏:** –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑
2. **–ü–µ—Ä–≤–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ:** –ø–µ—Ä–≤–æ–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
3. **–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∞ = –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω:** –µ—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç, –¥–æ—Å—Ç—É–ø –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
4. **Allow –ø—Ä–∞–≤–∏–ª–æ:** –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –í–°–ï —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
5. **Disable –ø—Ä–∞–≤–∏–ª–æ:** –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω –µ—Å–ª–∏ –õ–Æ–ë–û–ï —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–æ–±—ã—Ç–∏—è vAccess –¥–ª—è –ø—Ä–æ–∫—Å–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤:
```
WebServer/tools/logs/logs_vaccess_proxy.log
```

–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤:
```
[2025-10-03 00:45:23] [vAccess-Proxy] üö´ –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω –¥–ª—è 192.168.1.50 –∫ git.example.ru/admin
```

## üîó –°–≤—è–∑—å —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

vAccess –¥–ª—è –ø—Ä–æ–∫—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç—É –∂–µ –∫–æ–¥–æ–≤—É—é –±–∞–∑—É**, —á—Ç–æ –∏ vAccess –¥–ª—è —Å–∞–π—Ç–æ–≤:
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏ IP, –ø—É—Ç–µ–π –æ–±—â–∏–µ
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤–µ–∑–¥–µ
- –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **IP-–∞–¥—Ä–µ—Å–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** (–Ω–µ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø—Ä–æ–∫—Å–∏)
2. **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∞–≤–∏–ª –≤–∞–∂–µ–Ω** - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –í–´–®–ï –æ–±—â–∏—Ö
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç** - –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ type_file –¥–∞–∂–µ –¥–ª—è –ø—Ä–æ–∫—Å–∏
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–¥—Å–µ—Ç–µ–π:** –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CIDR –Ω–æ—Ç–∞—Ü–∏—é (192.168.0.0/24)
5. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ç–∏–ø–∞ .tar.gz, .backup.sql

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ `_example_vAccess.conf`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –ø—Ä–∞–≤–∏–ª–∞ –µ—Å—Ç—å `type:` –∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ `logs_vaccess_proxy.log`

